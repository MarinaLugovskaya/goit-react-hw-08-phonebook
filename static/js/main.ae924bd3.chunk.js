(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{142:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),i=a(33),s=a.n(i),o=a(17),l=a(19),u=a(79),d=a(96),j=a.n(d),b=a(4),m=a(23),p=Object(l.b)("contacts/changeFilter"),h=a(26),f=a.n(h),O=a(41),x=a(30),v=a.n(x);v.a.defaults.baseURL="https://connections-api.herokuapp.com";var g,_=Object(l.c)("contacts/fetchContacts",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,v.a.get("/contacts").then((function(e){return e.data}));case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),N=Object(l.c)("contacts/add",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,v.a.post("/contacts",t);case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",n(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}()),w=Object(l.c)("contacts/delete",function(){var e=Object(O.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.rejectWithValue,e.prev=1,e.next=4,v.a.delete("/contacts/".concat(t));case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",n(console.log(e.t0)));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}()),k=Object(l.d)([],(g={},Object(b.a)(g,_.fulfilled,(function(e,t){return Object(o.a)(t.payload)})),Object(b.a)(g,N.fulfilled,(function(e,t){return[].concat(Object(o.a)(e),[t.payload])})),Object(b.a)(g,w.fulfilled,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),g)),C=Object(l.d)("",Object(b.a)({},p,(function(e,t){return t.payload}))),y=Object(m.b)({items:k,filter:C}),L=a(97),I=a.n(L);v.a.defaults.baseURL="https://connections-api.herokuapp.com";var F,S=function(e){v.a.defaults.headers.common.Authorization="Bearer ".concat(e)},A=function(){v.a.defaults.headers.common.Authorization=""},M=Object(l.c)("auth/register",function(){var e=Object(O.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("/users/signup",t);case 3:return a=e.sent,n=a.data,S(n.token),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),T=Object(l.c)("auth/login",function(){var e=Object(O.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("/users/login",t);case 3:return a=e.sent,n=a.data,S(n.token),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),q={register:M,logOut:Object(l.c)("auth/logout",Object(O.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("/users/logout");case 3:A(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),logIn:T},V={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name}},z=Object(l.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1},extraReducers:(F={},Object(b.a)(F,q.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(b.a)(F,q.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(b.a)(F,q.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),F)}).reducer,R=[].concat(Object(o.a)(Object(l.f)()),[I.a]),B={key:"auth",storage:j.a,whitelist:["token"]},D=Object(l.a)({reducer:{auth:Object(u.a)(B,z),contacts:y},middleware:R,devTools:!1}),J=D,U=Object(u.b)(D),E=a(14),P=a(15),W=(a(142),a(1)),Z=function(){return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("h1",{children:"Home"})})},Q=a(11),H=a(187),K=a(182),Y=a(183),G=a(25),X=a.n(G),$=function(){var e=Object(E.b)(),t=Object(n.useState)(""),a=Object(Q.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),s=Object(Q.a)(i,2),o=s[0],l=s[1],u=Object(n.useState)(""),d=Object(Q.a)(u,2),j=d[0],b=d[1],m=function(e){var t=e.currentTarget,a=t.name,n=t.value;switch(a){case"name":c(n);break;case"email":l(n);break;case"password":b(n);break;default:return}};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("h1",{className:X.a.title,children:"Registration"}),Object(W.jsx)(H.a,{onSubmit:function(t){t.preventDefault(),e(q.register({name:r,email:o,password:j})),c(""),l(""),b("")},component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:Object(W.jsxs)("ul",{className:X.a.formContainer,children:[Object(W.jsx)("li",{className:X.a.item,children:Object(W.jsx)(K.a,{id:"filled-password-input",label:"Name",type:"text",autoComplete:"current-password",variant:"filled",name:"name",value:r,required:!0,placeholder:"name",onChange:m})}),Object(W.jsx)("li",{className:X.a.item,children:Object(W.jsx)(K.a,{id:"filled-password-input",label:"Email",type:"email",autoComplete:"current-password",variant:"filled",name:"email",value:o,required:!0,placeholder:"email",onChange:m})}),Object(W.jsx)("li",{className:X.a.item,children:Object(W.jsx)(K.a,{id:"filled-password-input",label:"Password",type:"password",autoComplete:"current-password",variant:"filled",name:"password",value:j,required:!0,placeholder:"password",onChange:m})}),Object(W.jsx)("li",{className:X.a.item,children:Object(W.jsx)(Y.a,{className:X.a.button,type:"submit",variant:"outlined",children:"sign up"})})]})})]})},ee=function(){var e=Object(E.b)(),t=Object(n.useState)(""),a=Object(Q.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),s=Object(Q.a)(i,2),o=s[0],l=s[1],u=function(e){var t=e.currentTarget,a=t.name,n=t.value;switch(a){case"email":c(n);break;case"password":l(n);break;default:return}};return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("h1",{className:X.a.title,children:"Sign in"}),Object(W.jsx)(H.a,{onSubmit:function(t){t.preventDefault(),e(q.logIn({email:r,password:o})),c(""),l("")},component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:Object(W.jsxs)("ul",{className:X.a.formContainer,children:[Object(W.jsx)("li",{className:X.a.item,children:Object(W.jsx)(K.a,{id:"filled-password-input",label:"Name",autoComplete:"current-password",variant:"filled",type:"email",name:"email",value:r,onChange:u,required:!0,placeholder:"email"})}),Object(W.jsx)("li",{className:X.a.item,children:Object(W.jsx)(K.a,{id:"filled-password-input",label:"Email",autoComplete:"current-password",variant:"filled",type:"password",name:"password",value:o,onChange:u,required:!0,placeholder:"password"})}),Object(W.jsx)("li",{className:X.a.item,children:Object(W.jsx)(Y.a,{className:X.a.button,type:"submit",variant:"outlined",children:"sign in"})})]})})]})},te=function(e){return e.contacts.items},ae=function(e){return e.contacts.filter},ne=function(e){var t=te(e),a=ae(e).toLowerCase();return t.filter((function(e){return e.name.toLowerCase().includes(a)}))},re=a(99),ce=a.n(re),ie=a(184),se=a(188),oe=a(185),le=function(){var e=Object(E.c)(ae),t=Object(E.b)();return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(H.a,{className:ce.a.filter,component:"form",sx:{"& > :not(style)":{m:1}},noValidate:!0,autoComplete:"off",children:Object(W.jsxs)(ie.a,{variant:"standard",children:[Object(W.jsx)(oe.a,{htmlFor:"component-simple",children:"Find contacts by name"}),Object(W.jsx)(se.a,{id:"component-simple",type:"text",name:"filter",value:e,onChange:function(e){return t(p(e.target.value))}})]})})})},ue=a(55),de=a.n(ue),je=a(181),be=function(){var e=Object(E.b)(),t=Object(E.c)(ne);Object(n.useEffect)((function(){e(_())}),[e]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("h2",{className:de.a.title,children:"Contacts"}),Object(W.jsx)("ul",{children:t.map((function(a){return Object(W.jsxs)("li",{className:de.a.item,children:[Object(W.jsxs)("p",{className:de.a.text,children:[a.name,": ",a.number]}),Object(W.jsx)(je.a,{direction:"row",spacing:1,children:Object(W.jsx)(Y.a,{variant:"outlined",color:"error",className:de.a.button,onClick:function(){return t=a.id,e(w(t));var t},type:"button",children:"Delete"})})]},t.id)}))})]})},me=a(48),pe=a.n(me);function he(){var e=Object(E.b)(),t=Object(E.c)(te),a=Object(n.useState)(""),r=Object(Q.a)(a,2),c=r[0],i=r[1],s=Object(n.useState)(""),o=Object(Q.a)(s,2),l=o[0],u=o[1],d=function(e){var t=e.currentTarget,a=t.name,n=t.value;switch(a){case"name":i(n);break;case"number":u(n);break;default:return}};return Object(W.jsx)(W.Fragment,{children:Object(W.jsxs)(H.a,{onSubmit:function(a){return a.preventDefault(),t.some((function(e){return e.name.toLowerCase()===c.toLowerCase()}))?alert("".concat(c," is already exists in contact list")):""!==c||""!==l?(e(N({name:c,number:l})),i(""),void u("")):alert("fill out the form")},component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:[Object(W.jsx)("h1",{className:pe.a.title,children:"Phonebook"}),Object(W.jsxs)("ul",{className:pe.a.formContainer,children:[Object(W.jsx)("li",{className:pe.a.item,children:Object(W.jsx)(K.a,{id:"filled-password-input",label:"Name",autoComplete:"current-password",variant:"filled",type:"text",name:"name",value:c,onChange:d,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,placeholder:"name"})}),Object(W.jsx)("li",{className:pe.a.item,children:Object(W.jsx)(K.a,{id:"filled-password-input",label:"Number",autoComplete:"current-password",variant:"filled",type:"tel",name:"number",value:l,onChange:d,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,placeholder:"number"})}),Object(W.jsx)("li",{className:pe.a.item,children:Object(W.jsx)(Y.a,{variant:"outlined",type:"submit",children:"Add contact"})})]})]})})}var fe=function(){return Object(W.jsxs)("div",{children:[Object(W.jsx)(he,{}),Object(W.jsx)(le,{}),Object(W.jsx)(be,{})]})},Oe=a(49),xe=a.n(Oe),ve=function(){var e=Object(E.c)(V.getIsLoggedIn);return Object(W.jsxs)("nav",{className:xe.a.topMenu,children:[Object(W.jsx)(c.b,{className:xe.a.link,activeClassName:xe.a.activeLink,to:"/",exact:!0,children:"Home"}),e&&Object(W.jsx)(c.b,{className:xe.a.link,activeClassName:xe.a.activeLink,to:"/contacts",exact:!0,children:"Notes"})]})},ge=a(78),_e=a.n(ge),Ne=function(){var e=Object(E.b)(),t=Object(E.c)(V.getUserName);return Object(W.jsxs)("div",{className:_e.a.container,children:[Object(W.jsxs)("span",{className:_e.a.userName,children:["Welcome, ",t]}),Object(W.jsx)(Y.a,{variant:"outlined",type:"button",onClick:function(){return e(q.logOut())},children:"Go out"})]})},we=a(50),ke=a.n(we),Ce=function(){return Object(W.jsxs)("nav",{className:ke.a.topMenu,children:[Object(W.jsx)(c.b,{className:ke.a.link,activeClassName:ke.a.activeLink,to:"/register",exact:!0,children:"Sign up"}),Object(W.jsx)(c.b,{className:ke.a.link,activeClassName:ke.a.activeLink,to:"/login",exact:!0,children:"Sign in"})]})},ye=function(){var e=Object(E.c)(V.getIsLoggedIn);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ve,{}),e?Object(W.jsx)(Ne,{}):Object(W.jsx)(Ce,{})]})},Le=a(46),Ie=a(66),Fe=["children","redirectTo"];function Se(e){var t=e.children,a=e.redirectTo,n=Object(Ie.a)(e,Fe),r=Object(E.c)(V.getIsLoggedIn);return Object(W.jsx)(P.b,Object(Le.a)(Object(Le.a)({},n),{},{children:r?t:Object(W.jsx)(P.a,{to:a})}))}var Ae=["children","redirectTo","restricted"];function Me(e){var t=e.children,a=e.redirectTo,n=void 0===a?"/":a,r=e.restricted,c=void 0!==r&&r,i=Object(Ie.a)(e,Ae),s=Object(E.c)(V.getIsLoggedIn)&&c;return Object(W.jsx)(P.b,Object(Le.a)(Object(Le.a)({},i),{},{children:s?Object(W.jsx)(P.a,{to:n}):t}))}a(146);function Te(){return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(ye,{}),Object(W.jsxs)(P.d,{children:[Object(W.jsx)(Me,{path:"/",exact:!0,children:Object(W.jsx)(Z,{})}),Object(W.jsx)(Me,{path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(W.jsx)(ee,{})}),Object(W.jsx)(Me,{path:"/register",restricted:!0,children:Object(W.jsx)($,{})}),Object(W.jsx)(Se,{path:"/contacts",redirectTo:"/login",children:Object(W.jsx)(fe,{})})]})]})}var qe=a(101);s.a.render(Object(W.jsx)(r.a.StrictMode,{children:Object(W.jsx)(E.a,{store:J,children:Object(W.jsx)(qe.a,{loading:null,persistor:U,children:Object(W.jsx)(c.a,{children:Object(W.jsx)(Te,{})})})})}),document.getElementById("root"))},25:function(e,t,a){e.exports={title:"RegisterView_title__3TKWh",formContainer:"RegisterView_formContainer__2QLbl",item:"RegisterView_item__LKzQp"}},48:function(e,t,a){e.exports={title:"Form_title__2kam6",formContainer:"Form_formContainer__HN-Bd",item:"Form_item__3tCy4"}},49:function(e,t,a){e.exports={topMenu:"Navigation_topMenu__EcBBe","menu-main":"Navigation_menu-main__1QSeb",link:"Navigation_link__3qPqJ",activeLink:"Navigation_activeLink__1b170 Navigation_link__3qPqJ",navigation:"Navigation_navigation__34M6a"}},50:function(e,t,a){e.exports={topMenu:"AuthNav_topMenu__3fyX8","menu-main":"AuthNav_menu-main__2h2xV",link:"AuthNav_link__iDskf",activeLink:"AuthNav_activeLink__25_o7 AuthNav_link__iDskf",navigation:"AuthNav_navigation__1cSLR"}},55:function(e,t,a){e.exports={title:"Contacts_title__34IlY",text:"Contacts_text__1h6Ah",item:"Contacts_item__3Pb7_"}},78:function(e,t,a){e.exports={userName:"UserMenu_userName__2bJ7Q",container:"UserMenu_container__2Z5Z0"}},99:function(e,t,a){e.exports={filter:"Filter_filter__38zYq"}}},[[147,1,2]]]);
//# sourceMappingURL=main.ae924bd3.chunk.js.map